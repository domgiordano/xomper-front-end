<div class="team-page">
  <app-loader [loading]="loading"></app-loader>
  <div class="team-container">
    
    <!-- team header -->
    <div class="team-header">
      <div class="team-header-row">
        <!-- team picture -->
        <img 
          [src]="teamPicture ? teamPicture : 'assets/img/nfl.png'" 
          (error)="teamPicture='assets/img/nfl.png'" 
          alt="Team Picture" 
          class="team-pic"
        >

        <!-- team name -->
        <h1 class="team-name">{{ teamName }}</h1>

        <!-- username -->
        <p 
          class="clickable user-name"
          (click)="goToUserProfile(team?.user?.user_id)">
          {{ team?.userName }}
        </p>


        <!-- record -->
        <p class="team-record">
          ({{ team?.wins }}-{{ team?.losses }})
        </p>

        <!-- streak -->
        <p class="team-streak" 
          [ngClass]="{'win-streak': team?.streak?.type==='win', 'loss-streak': team?.streak?.type==='loss'}">
          {{ team?.streak?.type==='win' ? 'W' : 'L' }}{{ team?.streak?.total }}
        </p>

        <!-- league rank -->
        <p class="clickable team-place" (click)="goToStandings(teamLeague.league_id, 'league')">
          {{ teamLeague.name }} Standings:
          {{ team?.leagueRank }}{{ team?.leagueRank === 1 ? 'st' : team?.leagueRank === 2 ? 'nd' : team?.leagueRank === 3 ? 'rd' : 'th' }}
        </p>

        <!-- division rank -->
        <p class="clickable team-place" (click)="goToStandings(teamLeague.league_id, 'division')">
          {{ team?.divisionName }} Standings:
          {{ team?.divisionRank }}{{ team?.divisionRank === 1 ? 'st' : team?.divisionRank === 2 ? 'nd' : team?.divisionRank === 3 ? 'rd' : 'th' }}
        </p>
      </div>
    </div>

    <!-- Starters -->
    <div class="player-group" *ngIf="starters.length > 0">
      <h2 class="group-title">Starters</h2>
      <div class="roster">
        <div 
          class="player-card"
          *ngFor="let player of starters"
          [ngStyle]="getTeamStyle(player.data.team)"
        >
          <div class="player-header">
            <img 
              [src]="'https://sleepercdn.com/content/nfl/players/thumb/' + player.data.player_id + '.jpg'" 
              (error)="player.data.photoError = true" 
              alt="{{ player.data.full_name }}" 
              class="player-pic"
            >
            <div class="player-info">
              <div class="name-row">
                <h2 class="player-name">{{ player.data.full_name }}</h2>
                <img 
                  [src]="player.data.team ? 'https://sleepercdn.com/images/team_logos/nfl/' + player.data.team?.toLowerCase() + '.png' : 'assets/img/nfl.png'" 
                  alt="{{ player.data.team || 'FA' }}"
                  class="team-logo"
                >
              </div>
              <p class="player-meta">
                {{ player.data.team || 'FA' }} * {{ player.data.position }} * {{ player.data.number }}
              </p>
            </div>
          </div>

          <button 
            class="view-more-btn" 
            [ngStyle]="getTeamButtonStyle(player.data.team)"
            (click)="togglePlayerDetails(player)">
            {{ player.data.showDetails ? 'Hide Details' : 'View More' }}
          </button>

          <div class="player-details" *ngIf="player.data.showDetails">
            <p><strong>Age:</strong> {{ player.data.age }}</p>
            <p><strong>Height / Weight:</strong> {{ player.data.height }}" / {{ player.data.weight }} lbs</p>
            <p><strong>College:</strong> {{ player.data.college }}</p>
            <p><strong>Experience:</strong> {{ player.data.years_exp }} years</p>
            <p><strong>Status:</strong> {{ player.data.status }}</p>
            <p><strong>Depth Chart:</strong> {{ player.data.depth_chart_position }} ({{ player.data.depth_chart_order }})</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Bench -->
    <div class="player-group" *ngIf="bench.length > 0">
      <h2 class="group-title">Bench</h2>
      <div class="roster">
        <div 
          class="player-card"
          *ngFor="let player of bench"
          [ngStyle]="getTeamStyle(player.data.team)"
        >
          <div class="player-header">
            <img 
              [src]="'https://sleepercdn.com/content/nfl/players/thumb/' + player.data.player_id + '.jpg'" 
              (error)="player.data.photoError = true" 
              alt="{{ player.data.full_name }}" 
              class="player-pic"
            >
            <div class="player-info">
              <div class="name-row">
                <h2 class="player-name">{{ player.data.full_name }}</h2>
                <img 
                  [src]="'https://sleepercdn.com/images/team_logos/nfl/' + player.data.team.toLowerCase() + '.png'" 
                  alt="{{ player.data.team }}" 
                  class="team-logo"
                >
              </div>
              <p class="player-meta">
                {{ player.data.team }} * {{ player.data.position }} * {{ player.data.number }}
              </p>
            </div>
          </div>

          <button 
            class="view-more-btn" 
            [ngStyle]="getTeamButtonStyle(player.data.team)"
            (click)="togglePlayerDetails(player)">
            {{ player.data.showDetails ? 'Hide Details' : 'View More' }}
          </button>

          <div class="player-details" *ngIf="player.data.showDetails">
            <p><strong>Age:</strong> {{ player.data.age }}</p>
            <p><strong>Height / Weight:</strong> {{ player.data.height }}" / {{ player.data.weight }} lbs</p>
            <p><strong>College:</strong> {{ player.data.college }}</p>
            <p><strong>Experience:</strong> {{ player.data.years_exp }} years</p>
            <p><strong>Status:</strong> {{ player.data.status }}</p>
            <p><strong>Depth Chart:</strong> {{ player.data.depth_chart_position }} ({{ player.data.depth_chart_order }})</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Taxi Squad -->
    <div class="player-group" *ngIf="taxi.length > 0">
      <h2 class="group-title">Taxi Squad</h2>
      <div class="roster">
        <div 
          class="player-card"
          *ngFor="let player of taxi"
          [ngStyle]="getTeamStyle(player.data.team)"
        >
          <div class="player-header">
            <img 
              [src]="'https://sleepercdn.com/content/nfl/players/thumb/' + player.data.player_id + '.jpg'" 
              (error)="player.data.photoError = true" 
              alt="{{ player.data.full_name }}" 
              class="player-pic"
            >
            <div class="player-info">
              <div class="name-row">
                <h2 class="player-name">{{ player.data.full_name }}</h2>
                <img 
                  [src]="'https://sleepercdn.com/images/team_logos/nfl/' + player.data.team.toLowerCase() + '.png'" 
                  alt="{{ player.data.team }}" 
                  class="team-logo"
                >
              </div>
              <p class="player-meta">
                {{ player.data.team }} * {{ player.data.position }} * {{ player.data.number }}
              </p>
            </div>
          </div>

          <button 
            class="view-more-btn" 
            [ngStyle]="getTeamButtonStyle(player.data.team)"
            (click)="togglePlayerDetails(player)">
            {{ player.data.showDetails ? 'Hide Details' : 'View More' }}
          </button>

          <div class="player-details" *ngIf="player.data.showDetails">
            <p><strong>Age:</strong> {{ player.data.age }}</p>
            <p><strong>Height / Weight:</strong> {{ player.data.height }}" / {{ player.data.weight }} lbs</p>
            <p><strong>College:</strong> {{ player.data.college }}</p>
            <p><strong>Experience:</strong> {{ player.data.years_exp }} years</p>
            <p><strong>Status:</strong> {{ player.data.status }}</p>
            <p><strong>Depth Chart:</strong> {{ player.data.depth_chart_position }} ({{ player.data.depth_chart_order }})</p>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
